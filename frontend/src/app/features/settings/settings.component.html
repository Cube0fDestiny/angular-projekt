<app-navbar></app-navbar>

<div
  class="min-h-screen pt-16 flex flex-col bg-cover bg-center bg-fixed"
  style="background-image: url('assets/images/orange-grove.png')"
>
  <main class="grow flex justify-center items-start py-6 sm:py-8 lg:py-12 px-4 sm:px-6">
    
    <div class="w-full max-w-xl">
      
      <!-- Settings Card -->
      <div class="bg-[var(--o-bwhite)] rounded-2xl shadow-2xl overflow-hidden">
        
        <!-- Card Header -->
        <div class="bg-[var(--o-green)] px-6 py-6 sm:px-8 sm:py-8 text-center">
          <h1 class="text-xl sm:text-2xl font-bold text-[var(--o-beige)] mb-1">
            Account Settings
          </h1>
          <p class="text-sm text-[var(--o-beige)] opacity-80">
            Manage your profile information
          </p>
        </div>

        <!-- Profile Section -->
        <div class="p-6 sm:p-8 space-y-6">

          <!-- Name Field -->
          <div>
            <label class="block text-xs font-semibold text-[var(--o-orange)] uppercase tracking-wide mb-2">
              Name
            </label>
            
            <!-- Display Mode -->
            <div 
              *ngIf="!isEditingName" 
              class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-white border border-[var(--o-beige)] rounded-xl hover:border-[var(--o-dbeige)] transition-colors"
            >
              <span class="text-[var(--o-dgreen)] font-medium">
                {{ currentUser?.name || 'Not set' }}
              </span>
              <orang-button size="small" [istoggleable]="false" (click)="toggleEditingName()">
                Edit
              </orang-button>
            </div>
            
            <!-- Edit Mode -->
            <form *ngIf="isEditingName" (ngSubmit)="updateName()" class="space-y-3">
              <input
                type="text"
                [(ngModel)]="editedName"
                name="editedName"
                placeholder="Enter your name"
                class="w-full px-4 py-3 text-[var(--o-dgreen)] bg-white border-2 border-[var(--o-orange)] rounded-xl outline-none focus:border-[var(--o-dorange)] focus:ring-4 focus:ring-[var(--o-orange)]/20 transition-all"
                autofocus
              >
              <div class="flex flex-col sm:flex-row gap-2">
                <orang-button size="small" type="submit" [istoggleable]="false">
                  Save
                </orang-button>
                <orang-button size="small" type="button" [istoggleable]="false" (click)="toggleEditingName()">
                  Cancel
                </orang-button>
              </div>
            </form>
          </div>

          <!-- Surname Field -->
          <div>
            <label class="block text-xs font-semibold text-[var(--o-orange)] uppercase tracking-wide mb-2">
              Surname
            </label>
            
            <!-- Display Mode -->
            <div 
              *ngIf="!isEditingSurname" 
              class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-white border border-[var(--o-beige)] rounded-xl hover:border-[var(--o-dbeige)] transition-colors"
            >
              <span class="text-[var(--o-dgreen)] font-medium">
                {{ currentUser?.surname || 'Not set' }}
              </span>
              <orang-button size="small" [istoggleable]="false" (click)="toggleEditingSurname()">
                Edit
              </orang-button>
            </div>
            
            <!-- Edit Mode -->
            <form *ngIf="isEditingSurname" (ngSubmit)="updateSurname()" class="space-y-3">
              <input
                type="text"
                [(ngModel)]="editedSurname"
                name="editedSurname"
                placeholder="Enter your surname"
                class="w-full px-4 py-3 text-[var(--o-dgreen)] bg-white border-2 border-[var(--o-orange)] rounded-xl outline-none focus:border-[var(--o-dorange)] focus:ring-4 focus:ring-[var(--o-orange)]/20 transition-all"
              >
              <div class="flex flex-col sm:flex-row gap-2">
                <orang-button size="small" type="submit" [istoggleable]="false">
                  Save
                </orang-button>
                <orang-button size="small" type="button" [istoggleable]="false" (click)="toggleEditingSurname()">
                  Cancel
                </orang-button>
              </div>
            </form>
          </div>

          <!-- Email Field -->
          <div>
            <label class="block text-xs font-semibold text-[var(--o-orange)] uppercase tracking-wide mb-2">
              Email Address
            </label>
            
            <!-- Display Mode -->
            <div 
              *ngIf="!isEditingEmail" 
              class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-white border border-[var(--o-beige)] rounded-xl hover:border-[var(--o-dbeige)] transition-colors"
            >
              <span class="text-[var(--o-dgreen)] font-medium break-all">
                {{ currentUser?.email || 'Not set' }}
              </span>
              <orang-button size="small" [istoggleable]="false" (click)="toggleEditingEmail()">
                Edit
              </orang-button>
            </div>
            
            <!-- Edit Mode -->
            <form *ngIf="isEditingEmail" (ngSubmit)="updateEmail()" class="space-y-3">
              <input
                type="email"
                [(ngModel)]="editedEmail"
                name="editedEmail"
                placeholder="Enter your email"
                class="w-full px-4 py-3 text-[var(--o-dgreen)] bg-white border-2 border-[var(--o-orange)] rounded-xl outline-none focus:border-[var(--o-dorange)] focus:ring-4 focus:ring-[var(--o-orange)]/20 transition-all"
              >
              <div class="flex flex-col sm:flex-row gap-2">
                <orang-button size="small" type="submit" [istoggleable]="false">
                  Save
                </orang-button>
                <orang-button size="small" type="button" [istoggleable]="false" (click)="toggleEditingEmail()">
                  Cancel
                </orang-button>
              </div>
            </form>
          </div>

        </div>

        <!-- Security Section Header -->
        <div class="bg-[var(--o-dbeige)] px-6 py-3 sm:px-8 border-t border-b border-[var(--o-beige)]">
          <h2 class="text-xs font-semibold text-[var(--o-dgreen)] uppercase tracking-wider">
            Security
          </h2>
        </div>

        <!-- Security Section -->
        <div class="p-6 sm:p-8">

          <!-- Password Field -->
          <div>
            <label class="block text-xs font-semibold text-[var(--o-orange)] uppercase tracking-wide mb-2">
              Password
            </label>
            
            <!-- Display Mode -->
            <div 
              *ngIf="!isEditingPassword" 
              class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-white border border-[var(--o-beige)] rounded-xl hover:border-[var(--o-dbeige)] transition-colors"
            >
              <span class="text-[var(--o-green)] tracking-widest">
                ••••••••••••
              </span>
              <orang-button size="small" [istoggleable]="false" (click)="toggleEditingPassword()">
                Change
              </orang-button>
            </div>
            
            <!-- Edit Mode -->
            <div *ngIf="isEditingPassword" class="space-y-3">
              <input
                type="password"
                [(ngModel)]="editedPassword"
                name="editedPassword"
                placeholder="Enter new password"
                class="w-full px-4 py-3 text-[var(--o-dgreen)] bg-white border-2 border-[var(--o-orange)] rounded-xl outline-none focus:border-[var(--o-dorange)] focus:ring-4 focus:ring-[var(--o-orange)]/20 transition-all"
              >
              <div class="flex flex-col sm:flex-row gap-2">
                <orang-button size="small" [istoggleable]="false">
                  Update
                </orang-button>
                <orang-button size="small" [istoggleable]="false" (click)="toggleEditingPassword()">
                  Cancel
                </orang-button>
              </div>
            </div>
          </div>

        </div>

      </div>

    </div>
  </main>

  <app-footer></app-footer>
</div>